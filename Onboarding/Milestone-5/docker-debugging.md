# Command list:

- docker ps – list running containers
- docker inspect <container> – view detailed container info
- docker logs <container> – show logs from a running container
- docker logs -f <container> – follow logs in real time
- docker logs --tail 100 <container> – show the last 100 log lines
- docker exec -it <container> bash – open an interactive Bash shell inside a container
- docker exec -it <container> sh – open an interactive shell (if Bash is unavailable)
- docker exec -it <container> <command> – run a one-off command inside a container

# Reflection

## How can you check logs from a running container?

- docker logs <containername>
- Can also do it via the docker.desktop GUI.

## What is the difference between docker exec and docker attach?

- Docker exec runs a command on a specific container (`<container name> command`). Creating a new process inside the existing container's main running process.
- Docker attach connects the CLI to a specified container's initial process. Also multiple connections to the same container are allowed. Its useful as it gives you a live stream to the running process. Not just starts a new process.

## How do you restart a container without losing data?

-- `docker restart`
-- `docker stop/start`
--- Cannot use docker compose down as it removes the container in the process, deleting the writeable container layer.

## How can you troubleshoot database connection issues inside a containerized NestJS app?

- docker logs `<containername>`
- docker attach and watch the log files generated by the nestJS process?
- docker ps and see if the container is up.
- run database queries with `docker exec -it <nest_container> sh -lc "psql -h db -U focusbear -d testDB -c 'SELECT 1;'"` and see if a response comes back
- Inspect network settings of the running container with `docker inspect <nest_container> --format '{{json .NetworkSettings.Networks}}' | jq`
- Can increase nest logging to be more verbose in main.ts "const app = await NestFactory.create(AppModule, { logger: ['error','warn','log','debug','verbose'] });"
